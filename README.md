# Pomodoro Focus (番茄专注)

这是一个基于 [Tauri](https://tauri.app/) + [React](https://react.dev/) + [TypeScript](https://www.typescriptlang.org/) 构建的现代化番茄钟应用程序。旨在帮助用户通过番茄工作法（Pomodoro Technique）提高专注力，管理任务，并追踪工作效率。

## 🏆 比赛提交信息 (Competition Submission)

- **作品名称**: Pomodoro Focus (番茄专注)
- **作品简介 (简历)**:
  这是一个结合了 **Tauri** 高性能跨平台技术与 **AI 智能辅助** 的现代化番茄钟应用。它不仅遵循经典的番茄工作法（25分钟工作/5分钟休息），还引入了“森林种树”激励机制和基于 LLM (OpenAI/Compatible) 的智能效率分析功能。通过极简的界面设计、沉浸式的休息体验以及深度的专注数据统计，帮助用户在信息过载的数字时代重获深度工作的能力，实现自我管理与效率提升。

- **目标人群**:
  - **学生群体**: 面临备考、论文写作压力，需要克服拖延症、提高学习效率的在校生。
  - **开发者/程序员**: 需要长时间保持心流状态（Flow State），避免频繁上下文切换的脑力工作者。
  - **远程办公/自由职业者**: 缺乏外部监督环境，需要强有力的自我时间管理工具的 SOHO 一族。
  - **ADHD (注意力缺陷) 人群**: 需要借助外部工具来辅助管理注意力、规划任务的特殊群体。
  - **终身学习者**: 希望利用碎片化时间进行系统性学习，追踪投入时间的自我提升者。

- **解决什么问题**:
  1.  **注意力碎片化与干扰**: 通过强制性的倒计时和独立的沉浸式休息窗口，减少外部干扰，帮助用户建立“专注-休息”的良性节奏。
  2.  **缺乏即时正向反馈**: 传统的坚持往往枯燥乏味，本应用通过“种树”的可视化成就感和热力图，将抽象的时间投入转化为可见的“森林”，提供持续的动力。
  3.  **效率复盘困难**: 很多人只记录时间但不分析。本应用利用 AI 自动分析每日专注数据，提供个性化的效率总结和改进建议，替代繁琐的人工复盘。
  4.  **任务规划迷茫**: 面对复杂任务无从下手时，AI 辅助功能可以将模糊的一句话目标（如“写一篇博客”）自动拆解为可执行的具体步骤（Actionable Plans），降低开始任务的心理门槛。

---

## 🌟 功能介绍 (Features)

### 1. 核心计时器
- **多种模式**：支持工作模式（Focus）、短休息（Short Break）和长休息（Long Break）。
- **自定义时长**：用户可以在设置中自定义每种模式的时长。
- **自动流转**：完成指定数量的工作循环后，自动触发长休息。
- **独立休息窗口**：长休息时会弹出一个独立的窗口，强制用户休息（带有倒计时和动画），防止过度疲劳。

### 2. 任务管理与 AI 辅助
- **任务追踪**：可以创建任务并针对特定任务进行专注计时。
- **AI 智能任务分析**：(New!) 用户只需输入模糊的任务描述（例如：“准备下周的数学考试”），点击 AI 按钮，系统会自动生成简洁的任务标题（“数学考试复习”）和具体的执行步骤计划。
- **任务状态**：标记任务完成状态，记录每个任务的专注时长。
- **任务历史**：查看已完成或正在进行的任务列表，支持快速复用历史任务。

### 3. 数据统计 (Forest & Stats)
- **种树激励**：每完成一个专注周期，会在“森林”中种下一棵树，提供视觉反馈和成就感。
- **基础统计**：展示总“种树”数量和今日专注总时长。
- **活动热力图**：使用 GitHub 风格的热力图 (Heatmap) 展示过去一年的专注活跃度。
- **AI 智能总结**：(New!) 集成 AI (OpenAI 兼容接口) 分析每日专注数据，提供个性化的效率总结和改进建议。

### 4. 个性化设置
- **多语言支持**：内置英文（English）和中文（简体）切换。
- **AI 配置**：支持自定义 API Key、Base URL 和模型名称 (Model)，兼容 OpenAI、DeepSeek 等多种服务。
- **参数配置**：
  - 专注时长
  - 短/长休息时长
  - 长休息触发间隔

## 📂 项目结构 (Project Structure)

项目采用标准的 Tauri + Vite React 结构：

- **`src-tauri/`**: Tauri 后端代码 (Rust)。负责系统交互、窗口管理等。
- **`src/`**: React 前端代码。
  - **`components/`**:
    - `Dashboard.tsx`: 主界面，包含计时器和任务列表逻辑。
    - `BreakView.tsx`: 独立休息窗口的视图。
    - `SettingsModal.tsx`: 设置弹窗 (包含 AI 配置)。
    - `StatsView.tsx`: 统计界面 (含热力图和 AI 总结)。
    - `TaskEntryModal.tsx`: 新建任务弹窗 (含 AI 任务分析)。
    - `TaskDetailsModal.tsx`: 任务详情展示。
    - `TimerDisplay.tsx`: 倒计时显示组件。
    - `CircularProgress.tsx`: 环形进度条组件。
  - **`i18n/`**: 国际化资源文件 (`translations.ts`)。
  - **`utils/`**:
    - `ai.ts`: AI 接口调用封装 (API Client)。
    - `tauri.ts`: Tauri API 封装。
  - **`App.tsx`**: 路由配置。

## ⚙️ 环境配置 (Environment Setup)

你可以通过创建 `.env` 文件来配置默认的 AI 设置（可选）：

```bash
# .env 文件示例
VITE_AI_BASE_URL=https://api.openai.com/v1
VITE_AI_API_KEY=your_api_key_here
VITE_AI_MODEL=gpt-4o-mini
```

如果没有配置 `.env`，用户也可以在应用内的设置界面手动输入 API Key。

## 🚀 如何运行 (How to Run)

1. **安装依赖**:
   ```bash
   npm install
   ```

2. **开发模式 (Web)**:
   ```bash
   npm run dev
   ```

3. **开发模式 (Tauri Desktop)**:
   ```bash
   npm run tauri dev
   ```

4. **构建发布**:
   ```bash
   npm run tauri build
   ```

## 🔍 现状分析与改进建议 (Analysis & Improvements)

### 现有优点
1. **轻量级跨平台**：得益于 Tauri，应用体积小，性能好。
2. **功能闭环**：具备了番茄钟的核心功能（计时、任务、统计、设置）。
3. **视觉反馈**：通过“种树”和“热力图”给予用户正向反馈。
4. **AI 赋能**：引入 AI 辅助任务拆解与效率分析，提升了应用的智能化水平。

### 缺点与不足 (Cons)
1. **代码结构**：
   - `Dashboard.tsx` 文件承担了较多的职责，虽然已有一些拆分，但仍有优化空间。
   - 样式主要依赖 CSS 文件和行内样式，可以考虑引入更现代的 CSS 方案。
2. **数据持久化**：
   - 目前依赖 `localStorage`。虽然简单，但容易因清理缓存而丢失数据。
3. **功能体验**：
   - 声音提醒功能尚待完善。

### 改进建议 (Roadmap)
#### 1. 代码重构
- **样式抽离**：引入 CSS Modules 或 Tailwind CSS，移除行内样式。
- **状态管理**：随着应用复杂度增加，可以考虑引入 Zustand 或 Redux Toolkit。

#### 2. 数据存储升级
- 引入 **SQLite** (通过 `tauri-plugin-sql`) 或使用文件系统存储，确保数据安全。

#### 3. 功能增强
- **声音提醒**：添加白噪音背景音和计时结束提示音。
- **系统托盘**：添加系统托盘图标，支持快速控制。
